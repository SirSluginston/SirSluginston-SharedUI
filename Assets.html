<!--
    SharedUI Assets Page
    - Modular, reusable, and future-proof (like a slug in a suit)
    - All content and branding injected/configured via JS and projects.json
    - If you break this, you owe SirSluginston a coffee
-->
<!DOCTYPE html>
<html lang="en">
<head>
        <script>
    // Insert ?project=SharedUI in the URL if missing, without reloading
        (function() {
            var params = new URLSearchParams(window.location.search);
            if (!params.has('project')) {
                params.set('project', 'SharedUI');
                var newUrl = window.location.pathname + '?' + params.toString();
                window.history.replaceState({}, '', newUrl);
            }
        })();
        </script>
            <script>
            // Insert ?project=sharedui in the URL if missing, without reloading
            (function() {
                var params = new URLSearchParams(window.location.search);
                if (!params.has('project')) {
                    params.set('project', 'sharedui');
                    var newUrl = window.location.pathname + '?' + params.toString();
                    window.history.replaceState({}, '', newUrl);
                }
            })();
            </script>
    <!-- SharedUI core styles and config: don't touch unless you like chaos -->
    <link rel="stylesheet" href="SharedUI-border.css">
    <!-- All config is now loaded from projects.json. -->
    <link rel="stylesheet" href="variables.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assets | SirSluginston Co</title>
    <!-- SharedUI component styles: keep it snazzy -->
    <link rel="stylesheet" href="Header/header.css">
    <link rel="stylesheet" href="Navbar/navbar.css">
    <link rel="stylesheet" href="Body/body.css">
    <link rel="stylesheet" href="Footer/footer.css">
    <link rel="stylesheet" href="ThemeToggle/theme-toggle.css">
    <link rel="stylesheet" href="Dropdown/dropdown.css">
    <link rel="stylesheet" href="Modals/modal.css">
    <link rel="stylesheet" href="Hero/hero.css">
</head>
<body>
    <div class="sharedui-outer-border">
        <!-- SharedUI Header: top hat required -->
        <div id="header-container"></div>
    <!-- SharedUI Navbar: navigation for the truly lost -->
    <div id="site-navbar"></div>
    <!-- SharedUI Hero: page title and tagline -->
    <div id="shared-hero-container"></div>
    <!-- SharedUI Body: where the magic (and assets) happen -->
        <div id="body-container">
            <div class="shared-body">
                <div class="body-content">
                    <!-- Gallery Section: show off the goods -->
                    <section class="assets-section assets-gallery">
                        <h3>Gallery: Mascots & Project Logos</h3>
                        <div class="assets-gallery-grid">
                            <div class="assets-gallery-item">
                                <img src="Assets/Images/SirSluginston_Logo_Original.JPG" alt="SirSluginston Logo" class="assets-gallery-img">
                                <div class="assets-gallery-caption">SirSluginston Logo</div>
                                <a href="Assets/Images/SirSluginston_Logo_Original.JPG" download class="assets-gallery-download">Download</a>
                            </div>
                        </div>
                    </section>

                    <!-- Vector Closet Section: play dress-up with SVGs -->
                    <section class="assets-section assets-closet">
                        <h3>Vector Closet: Mix & Match Mascot Layers</h3>
                        <div class="assets-closet-controls">
                            <!-- Controls for selecting Jacket, Hat, etc. -->
                        </div>
                        <div class="assets-closet-preview">
                            <!-- Live mascot preview -->
                        </div>
                    </section>

                    <!-- Icon Library Section: tiny but mighty -->
                    <section class="assets-section assets-icons">
                        <h3>Icon Library</h3>
                        <div class="assets-icons-grid">
                            <!-- Icon items injected by JS -->
                        </div>
                    </section>

                    <!-- UI Elements Section: buttons, badges, and other shiny things -->
                    <section class="assets-section assets-ui">
                        <h3>UI Elements</h3>
                        <div class="assets-ui-grid">
                            <!-- UI elements (buttons, badges, etc.) -->
                        </div>
                    </section>

                    <!-- Future Asset Types Placeholder: for when inspiration strikes -->
                    <section class="assets-section assets-future">
                        <h3>More Brand Assets Coming Soon</h3>
                        <ul>
                            <li>Color Palette & Swatches</li>
                            <li>Fonts & Typography</li>
                            <li>Wallpapers & Backgrounds</li>
                            <li>Social Media Templates</li>
                            <li>Press Kit & Brand Guidelines</li>
                        </ul>
                    </section>
                </div>
                <div class="body-content" id="shared-body-content"></div>
            </div>
        </div>
        <!-- SharedUI Footer: the end, but also the beginning -->
        <div id="footer-container"></div>
    </div>
    <!-- SharedUI JS: theme toggle, header, navbar, account injection -->
    <script src="ThemeToggle/theme-toggle.js"></script>
    <script src="Header/header.js"></script>
                <script src="SharedUI/sharedui.js"></script>
                <script>
                (async function() {
                    const { getProjects, injectHeader, injectFooter, applyBranding } = window.SharedUILib;
                    const projects = await getProjects();
                    // Prefer ?project=slug, else match by page href, else fallback
                    const params = new URLSearchParams(window.location.search);
                    const slug = params.get('project');
                    let config = projects[0];
                    if (slug) {
                        const bySlug = projects.find(p => p.slug && p.slug.toLowerCase() === slug.toLowerCase());
                        if (bySlug) config = bySlug;
                            console.log('[SharedUI DEBUG] Slug from URL:', slug, 'Selected config:', config);
                    } else {
                        const pageHref = window.location.pathname.split('/').pop() || 'Assets.html';
                        const byPage = projects.find(p => Array.isArray(p.pages) && p.pages.some(pg => pg.href && pg.href.toLowerCase() === pageHref.toLowerCase()));
                        if (byPage) config = byPage;
                            console.log('[SharedUI DEBUG] No slug in URL. pageHref:', pageHref, 'Selected config:', config);
                    }
                    window.SharedUIConfig = config;
                    applyBranding(config);
                    injectHeader(config);
                    if (typeof initSharedHeader === 'function') initSharedHeader();
                    injectFooter(config);
                                        // Set hero content from config
                                                                                                                        var heroContainer = document.getElementById('shared-hero-container');
                                                                                                                        var pageHref = window.location.pathname.split('/').pop() || 'Assets.html';
                                                                                                                        // Normalize to ensure .html extension is present for matching
                                                                                                                        var normPageHref = pageHref.endsWith('.html') ? pageHref.toLowerCase() : (pageHref + '.html').toLowerCase();
                                                                                                                        var pageConfig = (config.pages || []).find(p => {
                                                                                                                            if (!p.href) return false;
                                                                                                                            var normHref = p.href.toLowerCase();
                                                                                                                            return normHref === normPageHref || normHref.replace('.html','') === pageHref.toLowerCase().replace('.html','');
                                                                                                                        });
                                                                                console.log('[SharedUI DEBUG] Hero injection:', {
                                                                                    config,
                                                                                    pageHref,
                                                                                    pageConfig,
                                                                                    heroContainer,
                                                                                    SharedUIHero: window.SharedUIHero
                                                                                });
                                                                                if (window.SharedUIHero && heroContainer && pageConfig) {
                                                                                        SharedUIHero.inject(heroContainer, pageConfig.pageTitle, pageConfig.pageTagline);
                                                                                } else {
                                                                                    console.warn('[SharedUI DEBUG] Hero NOT injected:', {
                                                                                        hasSharedUIHero: !!window.SharedUIHero,
                                                                                        hasHeroContainer: !!heroContainer,
                                                                                        hasPageConfig: !!pageConfig
                                                                                    });
                                                                                }
                    // Now load the navbar script so it can use SharedUIConfig
                    var navbarScript = document.createElement('script');
                    navbarScript.src = 'Navbar/navbar.js';
                    navbarScript.onload = function() {
                                            if (window.SharedUIDropdown) SharedUIDropdown.initAll();
                                        };
                                        document.body.appendChild(navbarScript);
                })();
                </script>
        <script src="Dropdown/dropdown.js"></script>
        <script src="Modals/modal.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          if (window.SharedUIDropdown) SharedUIDropdown.initAll();
          if (window.SharedUIModal) SharedUIModal.initAll();
        });
        </script>
</body>
<script src="Hero/hero.js"></script>
</html>
